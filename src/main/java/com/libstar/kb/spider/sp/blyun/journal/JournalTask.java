package com.libstar.kb.spider.sp.blyun.journal;import com.libstar.kb.spider.sp.blyun.service.JournalTempService;import com.libstar.kb.spider.sp.blyun.util.BlyunUtil;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;import us.codecraft.webmagic.Request;import us.codecraft.webmagic.Spider;import us.codecraft.webmagic.downloader.HttpClientDownloader;import us.codecraft.webmagic.proxy.Proxy;import us.codecraft.webmagic.proxy.SimpleProxyProvider;import us.codecraft.webmagic.scheduler.RedisScheduler;import java.lang.reflect.Array;import java.util.List;/** * @author itguang * @create 2018-07-13 16:24 **/@Component@Slf4jpublic class JournalTask {    static String X_REAL_IP = "106.15.229.61";    @Autowired    JournalTempService journalTempService;    @Autowired    JournalPipeline pipeline;    @Autowired    JournalProcessor processor;    @Autowired    RedisScheduler redisScheduler;    //@Async    public void task() {        Spider spider = Spider.create(processor).addPipeline(pipeline);//.setScheduler(redisScheduler);        HttpClientDownloader downloader = new HttpClientDownloader();        downloader.setProxyProvider(SimpleProxyProvider.from(new Proxy(X_REAL_IP, 8011)));        spider.setDownloader(downloader);        Request request = BlyunUtil.getUrl("1","1");        spider.addRequest(request);        spider.thread(2).run();        log.info("-->> end <<抓取 http://fjour.blyun.com/magguide 的任务完毕>>");    }}